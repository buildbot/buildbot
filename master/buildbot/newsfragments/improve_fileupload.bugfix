Improved FileUpload efficiency (:issue:`3709`)
