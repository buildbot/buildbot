/*! iFrame Resizer (iframeSizer.min.js ) - v2.4.5 - 2014-05-06
 *  Desc: Force cross domain iframes to size to content.
 *  Requires: iframeResizer.contentWindow.min.js to be loaded into the target frame.
 *  Copyright: (c) 2014 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */

!function(){function e(e,t,n){"addEventListener"in window?e.addEventListener(t,n,!1):"attachEvent"in window&&e.attachEvent("on"+t,n)}function t(){var e,t=["moz","webkit","o","ms"];for(e=0;e<t.length&&!window.requestAnimationFrame;e+=1)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"];window.requestAnimationFrame||(n(" RequestAnimationFrame not supported"),window.requestAnimationFrame=function(e){e()})}function n(e){w.log&&"object"==typeof console&&console.log(v+"[Host page"+g+"]"+e)}function r(e){function t(){function e(){u(E),s()}a(e,E,"resetPage")}function r(e){n(" iFrame "+e.id+" removed."),e.parentNode.removeChild(e)}function i(){var e=b.substr(m).split(":");return{iframe:document.getElementById(e[0]),id:e[0],height:e[1],width:e[2],type:e[3]}}function f(){var t=e.origin,r=E.iframe.src.split("/").slice(0,3).join("/");if(w.checkOrigin&&(n(" Checking conection is from: "+r),""+t!="null"&&t!==r))throw new Error("Unexpected message received from: "+t+" for "+E.iframe.id+". Message was: "+e.data);return!0}function l(){return v===(""+b).substr(0,m)}function c(){var e=E.type in{"true":1,"false":1};return e&&n(" Ignoring init message from meta parent page"),e}function h(){w.messageCallback({iframe:E.iframe,message:b.substr(b.lastIndexOf(":")+1)})}function p(){if(null===E.iframe)throw new Error("iFrame ("+E.id+") does not exist on "+g);return!0}function y(){switch(E.type){case"close":r(E.iframe),w.resizedCallback(E);break;case"message":h();break;case"reset":o(E);break;default:t(),w.resizedCallback(E)}}var b=e.data,E={};l()&&(n(" Received: "+b),E=i(),!c()&&p()&&f()&&(d=!1,y()))}function i(){null===y&&(y={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},n(" Get position: "+y.x+","+y.y))}function s(){null!==y&&(window.scrollTo(y.x,y.y),n(" Set position: "+y.x+","+y.y),y=null)}function o(e){function t(){u(e),f("reset","reset",e.iframe)}n(" Size reset requested by "+("init"===e.type?"host page":"iFrame")),i(),a(t,e,"init")}function u(e){function t(t){e.iframe.style[t]=e[t]+"px",n(" IFrame ("+e.iframe.id+") "+t+" set to "+e[t]+"px")}w.sizeHeight&&t("height"),w.sizeWidth&&t("width")}function a(e,t,r){r!==t.type?(n(" Requesting animation frame"),window.requestAnimationFrame(e)):e()}function f(e,t,r){n("["+e+"] Sending msg to iframe ("+t+")"),r.contentWindow.postMessage(v+t,"*")}function l(){function t(e){return""===e&&(a.id=e="iFrameResizer"+p++,n(" Added missing iframe ID: "+e)),e}function r(){n(" IFrame scrolling "+(w.scrolling?"enabled":"disabled")+" for "+l),a.style.overflow=!1===w.scrolling?"hidden":"auto",a.scrolling=!1===w.scrolling?"no":"yes"}function i(){("number"==typeof w.bodyMargin||"0"===w.bodyMargin)&&(w.bodyMarginV1=w.bodyMargin,w.bodyMargin=""+w.bodyMargin+"px")}function s(){return l+":"+w.bodyMarginV1+":"+w.sizeWidth+":"+w.log+":"+w.interval+":"+w.enablePublicMethods+":"+w.autoResize+":"+w.bodyMargin+":"+w.heightCalculationMethod+":"+w.bodyBackground+":"+w.bodyPadding}function u(t){e(a,"load",function(){f("iFrame.onload",t,a),!d&&w.heightCalculationMethod in b&&o({iframe:a,height:0,width:0,type:"init"})}),f("init",t,a)}var a=this,l=t(a.id);r(),i(),u(s())}function c(){function e(e){if("IFRAME"!==e.tagName)throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">.");l.call(e)}function t(e){if(e=e||{},"object"!=typeof e)throw new TypeError("Options is not an object.");for(var t in E)E.hasOwnProperty(t)&&(w[t]=e.hasOwnProperty(t)?e[t]:E[t])}window.iFrameResize=function(n,r){t(n),Array.prototype.forEach.call(document.querySelectorAll(r||"iframe"),e)}}function h(e){e.fn.iFrameResize=function(t){return w=e.extend({},E,t),this.filter("iframe").each(l).end()}}var p=0,d=!0,v="[iFrameSizer]",m=v.length,g="",y=null,b={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},w={},E={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,messageCallback:function(){},resizedCallback:function(){},scrolling:!1,sizeHeight:!0,sizeWidth:!1};t(),e(window,"message",r),c(),"jQuery"in window&&h(jQuery)}();